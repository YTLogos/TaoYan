<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>setup | Tao Yan</title>
    <link>https://taoyan.netlify.app/tags/setup/</link>
      <atom:link href="https://taoyan.netlify.app/tags/setup/index.xml" rel="self" type="application/rss+xml" />
    <description>setup</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© Tao Yan, 2018-2020</copyright><lastBuildDate>Mon, 30 Mar 2020 16:19:05 +0000</lastBuildDate>
    <image>
      <url>https://taoyan.netlify.app/img/pom-card.png</url>
      <title>setup</title>
      <link>https://taoyan.netlify.app/tags/setup/</link>
    </image>
    
    <item>
      <title>R启动项配置文件</title>
      <link>https://taoyan.netlify.app/post/2020-03-30.r%E5%90%AF%E5%8A%A8%E9%A1%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</link>
      <pubDate>Mon, 30 Mar 2020 16:19:05 +0000</pubDate>
      <guid>https://taoyan.netlify.app/post/2020-03-30.r%E5%90%AF%E5%8A%A8%E9%A1%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/YTLogos/pic_link/master/img/20200407234529.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;配置文件&#34;&gt;配置文件&lt;/h2&gt;
&lt;p&gt;R每次启动的时候都会读取两个文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.Renviron&lt;/code&gt;：主要作用是设置环境变量，告诉R在哪里寻找外部程序，可以自定义用户信息&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;.Rprofile&lt;/code&gt;：每次R启动的时候会运行里面的代码，所以如果里面设置的很多代码，R启动就会变慢&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;R启动的时候最开始读取&lt;code&gt;.Renviron&lt;/code&gt;文件，接着读取&lt;code&gt;.Rprofile&lt;/code&gt;文件&lt;/p&gt;
&lt;h2 id=&#34;配置文件在哪里&#34;&gt;配置文件在哪里？&lt;/h2&gt;
&lt;p&gt;实际上每台电脑里存在好几个版本的配置文件，但是每次启动的时候只会读取一个，需要注意以下三个目录：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;R_HOME&lt;/code&gt;：R安装的文件夹，&lt;code&gt;etc&lt;/code&gt;子目录包含配置文件，可以利用&lt;code&gt;R.home()&lt;/code&gt;获取该目录&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;HOME&lt;/code&gt;：用户的家目录，用户特异性的配置文件，一般是在&lt;code&gt;/home/username&lt;/code&gt;(Linux)，&lt;code&gt;c:\User\username&lt;/code&gt;(Windows)，可以通过&lt;code&gt;Sys.getenv(&amp;quot;HOME&amp;quot;)&lt;/code&gt;获取&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;R的工作目录，&lt;code&gt;getwd()&lt;/code&gt;获取&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;R读取配置文件(&lt;code&gt;.Renviron&lt;/code&gt;，&lt;code&gt;.Rprofile&lt;/code&gt;)的优先级是工作目录&amp;gt;&lt;code&gt;HOME&lt;/code&gt;&amp;gt;&lt;code&gt;R_HOME&lt;/code&gt;，因此如果需要创建项目特异的配置文件的话，可以在项目根目录下创建配置文件：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;file.edit(&amp;quot;~/.Rprofile&amp;quot;) # edit .Rprofile in HOME
file.edit(&amp;quot;.Rprofile&amp;quot;) # edit project specific .Rprofile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们可以通过以下的脚本来检查是否存在配置文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;site_path = R.home(component = &amp;quot;home&amp;quot;)
fname = file.path(site_path, &amp;quot;etc&amp;quot;, &amp;quot;Rprofile.site&amp;quot;)
file.exists(fname)
[1] FALSE

file.exists(&amp;quot;~/.Rprofile&amp;quot;)
[1] TRUE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以看到R安装的子目录&lt;code&gt;etc&lt;/code&gt;里面不存在&lt;code&gt;.Rprofile.site&lt;/code&gt;，但是我的家目录里面存在。&lt;/p&gt;
&lt;h2 id=&#34;如何理解配置文件&#34;&gt;如何理解配置文件&lt;/h2&gt;
&lt;p&gt;这里创建一个简单的配置文件，我们使用&lt;code&gt;file.edit(&amp;quot;~/.Rprofile&amp;quot;)&lt;/code&gt;来打开文件，添加内容并重启R&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# A fun welcome message
message(&amp;quot;Hi Tom, welcome to R&amp;quot;)
# Customise the R prompt that prefixes every command
# (use &amp;quot; &amp;quot; for a blank prompt)
options(prompt = &amp;quot;R-&amp;gt; &amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重启之后显示：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Hi Tom, welcome to R
R-&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;R默认提示符是&lt;code&gt;&amp;gt; &lt;/code&gt;，这里我们设置成了&lt;code&gt;R-&amp;gt; &lt;/code&gt;，所以通过&lt;code&gt;.Rprofile&lt;/code&gt;可以很方便个性化设置启动配置，可以参考
&lt;a href=&#34;https://www.statmethods.net/interface/customizing.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;statmethods.net&lt;/code&gt;&lt;/a&gt;来定制化启动项。比如我一般会设置代码连接符为&lt;code&gt;&amp;quot; &amp;quot;&lt;/code&gt;，默认的是&lt;code&gt;+&lt;/code&gt;，每次复制代码的时候都带着一堆&lt;code&gt;+&lt;/code&gt;号，修改后就没有了。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;options(prompt = &amp;quot;-&amp;gt; &amp;quot;, continue = &amp;quot;  &amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;对于我们来说最重要的就是在&lt;code&gt;.Rprofile&lt;/code&gt;中设置默认镜像等，不然国内使用默认镜像的话下载包速度感人：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;options(BioC_mirror=&amp;quot;https://mirrors.tuna.tsinghua.edu.cn/bioconductor&amp;quot;)
options(repos=&amp;quot;https://mirrors.tuna.tsinghua.edu.cn/CRAN/&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;.Renviron&lt;/code&gt;文件设置环境变量等，R启动的时候首先搜索全局&lt;code&gt;.Renviron&lt;/code&gt;，接着本地&lt;code&gt;.Renviron&lt;/code&gt;，&lt;code&gt;.Renviron&lt;/code&gt;一个典型应用是设置&lt;code&gt;.R_LIBS&lt;/code&gt;，决定R包安装文件夹：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# Linux
R_LIBS=~/R/library
# Windows
R_LIBS=C:/R/library
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;可以通过&lt;code&gt;Sys.getenv(&amp;quot;R_LIBS_USER&amp;quot;)&lt;/code&gt;看包安装的默认文件夹。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;需要注意的是千万别胡乱添加，不然出错你都不知道错在哪？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;参考：https://csgillespie.github.io/efficientR/set-up.html&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>
